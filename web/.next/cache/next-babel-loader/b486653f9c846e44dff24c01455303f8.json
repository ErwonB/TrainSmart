{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/pi/mntRaspi/trainv2/web/src/components/ChangeProfile.tsx\";\nimport React from \"react\";\nimport { Box, FormControl, FormLabel, Select } from \"@chakra-ui/core\";\nimport { useRouter } from \"next/router\";\nimport { useApolloClient } from \"@apollo/client\";\nimport { useChangeProfileMutation } from \"../generated/graphql\";\nimport * as yup from \"yup\";\nimport { Field, Formik } from \"formik\";\nimport { InputField } from \"./InputField\";\nconst validationSchema = yup.object({\n  templateDetails: yup.array().of(yup.object({\n    exoDetail: yup.array().of(yup.object({\n      sets: yup.number().integer().positive().required(\"Nb sets is required\"),\n      reps: yup.number().integer().positive().required(\"Nb reps is required\"),\n      weight: yup.number().positive().required(\"Weight is required\"),\n      grade: yup.number().positive().max(10).required(\"Grade is required\")\n    }))\n  })),\n  trainingFrequency: yup.number().positive()\n});\nexport const ChangeProfile = ({\n  profile\n}) => {\n  const apolloClient = useApolloClient();\n  const router = useRouter();\n  const [changeProfile] = useChangeProfileMutation();\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: !profile ? {\n        lang_cd: \"\",\n        trainingFrequency: \"\",\n        trainingType: \"\",\n        sex: \"\"\n      } : {\n        lang_cd: profile.lang_cd,\n        trainingType: profile.trainingType,\n        trainingFrequency: profile.trainingFrequency,\n        sex: profile.sex\n      },\n      validationSchema: validationSchema,\n      onSubmit: async values => {\n        await changeProfile({\n          variables: {\n            lang_cd: values.lang_cd,\n            trainingType: values.trainingType,\n            trainingFrequency: String(values.trainingFrequency),\n            sex: values.sex\n          }\n        });\n        await apolloClient.resetStore();\n        router.push(\"/\");\n      },\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"lang_cd\",\n          children: \"Language\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          as: Select,\n          name: \"lang_cd\",\n          label: \"Language\",\n          type: \"select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"FR\",\n            children: \"FR\"\n          }, \"FR\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"EN\",\n            children: \"EN\"\n          }, \"EN\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        name: \"trainingFrequency\",\n        placeholder: \"Training Frequency\",\n        label: \"Training Frequency\",\n        type: \"number\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputField, {\n        name: \"trainingType\",\n        placeholder: \"Training Type\",\n        label: \"Training Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"sex\",\n          children: \"Sex\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Field, {\n          as: Select,\n          name: \"sex\",\n          label: \"Sex\",\n          type: \"select\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"M\",\n            children: \"M\"\n          }, \"M\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"F\",\n            children: \"F\"\n          }, \"F\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"sources":["/home/pi/mntRaspi/trainv2/web/src/components/ChangeProfile.tsx"],"names":["React","Box","FormControl","FormLabel","Select","useRouter","useApolloClient","useChangeProfileMutation","yup","Field","Formik","InputField","validationSchema","object","templateDetails","array","of","exoDetail","sets","number","integer","positive","required","reps","weight","grade","max","trainingFrequency","ChangeProfile","profile","apolloClient","router","changeProfile","lang_cd","trainingType","sex","values","variables","String","resetStore","push"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Box, FormControl, FormLabel, Select } from \"@chakra-ui/core\";\nimport { useRouter } from \"next/router\";\nimport { useApolloClient } from \"@apollo/client\";\nimport {\n  RegularProfileFragment,\n  useChangeProfileMutation,\n} from \"../generated/graphql\";\nimport * as yup from \"yup\";\nimport { Field, Formik } from \"formik\";\nimport { InputField } from \"./InputField\";\n\ninterface ChangeProfileProps {\n  profile: RegularProfileFragment | null;\n}\n\nconst validationSchema = yup.object({\n  templateDetails: yup.array().of(\n    yup.object({\n      exoDetail: yup.array().of(\n        yup.object({\n          sets: yup\n            .number()\n            .integer()\n            .positive()\n            .required(\"Nb sets is required\"),\n          reps: yup\n            .number()\n            .integer()\n            .positive()\n            .required(\"Nb reps is required\"),\n          weight: yup.number().positive().required(\"Weight is required\"),\n          grade: yup.number().positive().max(10).required(\"Grade is required\"),\n        })\n      ),\n    })\n  ),\n  trainingFrequency: yup.number().positive(),\n});\n\nexport const ChangeProfile: React.FC<ChangeProfileProps> = ({ profile }) => {\n  const apolloClient = useApolloClient();\n  const router = useRouter();\n  const [changeProfile] = useChangeProfileMutation();\n\n  return (\n    <Box>\n      <Formik\n        initialValues={\n          !profile\n            ? { lang_cd: \"\", trainingFrequency: \"\", trainingType: \"\", sex: \"\" }\n            : {\n                lang_cd: profile.lang_cd,\n                trainingType: profile.trainingType,\n                trainingFrequency: profile.trainingFrequency,\n                sex: profile.sex,\n              }\n        }\n        validationSchema={validationSchema}\n        onSubmit={async (values) => {\n          await changeProfile({\n            variables: {\n              lang_cd: values.lang_cd,\n              trainingType: values.trainingType,\n              trainingFrequency: String(values.trainingFrequency),\n              sex: values.sex,\n            },\n          });\n          await apolloClient.resetStore();\n          router.push(\"/\");\n        }}\n      >\n        <FormControl>\n          <FormLabel htmlFor=\"lang_cd\">Language</FormLabel>\n          <Field as={Select} name=\"lang_cd\" label=\"Language\" type=\"select\">\n            <option value=\"FR\" key=\"FR\">\n              FR\n            </option>\n            <option value=\"EN\" key=\"EN\">\n              EN\n            </option>\n          </Field>\n        </FormControl>\n        <InputField\n          name=\"trainingFrequency\"\n          placeholder=\"Training Frequency\"\n          label=\"Training Frequency\"\n          type=\"number\"\n        />\n        <InputField\n          name=\"trainingType\"\n          placeholder=\"Training Type\"\n          label=\"Training Type\"\n        />\n        <FormControl>\n          <FormLabel htmlFor=\"sex\">Sex</FormLabel>\n          <Field as={Select} name=\"sex\" label=\"Sex\" type=\"select\">\n            <option value=\"M\" key=\"M\">\n              M\n            </option>\n            <option value=\"F\" key=\"F\">\n              F\n            </option>\n          </Field>\n        </FormControl>\n      </Formik>\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}